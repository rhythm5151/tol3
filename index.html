<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Credit Card Generator Demo</title>
    <style>
        body {font-family:sans-serif; margin:20px; background:#f7f7f7;}
        label, input, select {display:block; margin:5px 0;}
        #cards {margin-top:20px; white-space:pre; background:#fff; padding:1em;}
        .btn {padding:0.4em 1em; margin-top:8px;}
        .success {color:green;}
        .error {color:red;}
    </style>
</head>
<body>

<h2>Credit Card Generator</h2>
<form id="genForm">
    <label>BIN prefix (use X for random digits, e.g. 400000XXXXXXXXXX):</label>
    <input type="text" id="bin" placeholder="400000XXXXXXXXXX">

    <label>Quantity:</label>
    <input type="number" id="quantity" min="1" max="100" value="10">

    <label>Expiry Month:</label>
    <input type="text" id="month" maxlength="2" placeholder="Random if empty">

    <label>Expiry Year:</label>
    <input type="text" id="year" maxlength="4" placeholder="e.g. 2027 or 27">

    <label>CVV Length:</label>
    <select id="cvvlen"><option value="3">3</option><option value="4">4</option></select>

    <label><input type="checkbox" id="randomCVV" checked>Random CVV</label>
    <label><input type="checkbox" id="randomExpiry" checked>Random Expiry</label>
    <button type="button" class="btn" onclick="generateCards()">Generate</button>
</form>

<div id="cards"></div>
<button class="btn" onclick="copyCards()">Copy All</button>
<button class="btn" onclick="downloadCards()">Download TXT</button>

<script>
function luhnCheckDigit(cardNumber) {
    let digits = cardNumber.split('').map(Number);
    for (let i=digits.length-1; i>=0; i-=2) {
        let d = digits[i];
        d *= 2;
        if (d>9) d -= 9;
        digits[i] = d;
    }
    let sum = digits.reduce((a,b)=>a+b,0);
    return (10-(sum%10))%10;
}

function fillBin(bin) {
    let completed = '';
    for (let i=0; i<bin.length; i++)
        completed += ((bin[i]=='x'||bin[i]=='X') ? Math.floor(Math.random()*10) : bin[i]);
    while(completed.length<15) completed += Math.floor(Math.random()*10);
    return completed.slice(0,15); // leave check digit to end
}

function detectBrand(cardNumber) {
    if (/^4/.test(cardNumber)) return "Visa";
    if (/^5[1-5]/.test(cardNumber)) return "MasterCard";
    if (/^3[47]/.test(cardNumber)) return "AMEX";
    if (/^6/.test(cardNumber)) return "Discover";
    return "Unknown";
}

function pad(n, w) {return n.toString().padStart(w,'0');}

function generateCards() {
    let bin = document.getElementById("bin").value || (400000 + Math.floor(Math.random()*100000)).toString();
    let quantity = parseInt(document.getElementById("quantity").value) || 10;
    let month = document.getElementById("month").value;
    let year = document.getElementById("year").value;
    let cvvlen = parseInt(document.getElementById("cvvlen").value);
    let randomCVV = document.getElementById("randomCVV").checked;
    let randomExpiry = document.getElementById("randomExpiry").checked;

    let cards = "";
    for (let q=0; q<quantity; q++) {
        // Card Number
        let incomplete = fillBin(bin);
        let checkDig = luhnCheckDigit(incomplete);
        let full_card = incomplete + checkDig;

        // Expiry
        let exp_m = randomExpiry ? pad(Math.floor(Math.random()*12)+1,2) : pad(month||Math.floor(Math.random()*12)+1,2);
        let nowY = new Date().getFullYear();
        let exp_y = randomExpiry ? (nowY+Math.floor(Math.random()*5)+1).toString() : (year.length==2?"20"+year:year||nowY+Math.floor(Math.random()*5)+1);

        // CVV
        let cvv = randomCVV ? pad(Math.floor(Math.random() * Math.pow(10,cvvlen)),cvvlen) : pad('0',cvvlen);

        let brand = detectBrand(full_card);

        cards += `${full_card}|${exp_m}|${exp_y}|${cvv}    (${brand})\n`;
    }
    document.getElementById("cards").textContent = cards;
}

function copyCards() {
    let cards = document.getElementById("cards").textContent;
    navigator.clipboard.writeText(cards);
    alert("Copied!");
}

function downloadCards() {
    let cards = document.getElementById("cards").textContent;
    let blob = new Blob([cards], {type:"text/plain"});
    let url = URL.createObjectURL(blob);
    let a = document.createElement('a');
    a.href = url; a.download = "cards.txt";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}
</script>
</body>
</html>
